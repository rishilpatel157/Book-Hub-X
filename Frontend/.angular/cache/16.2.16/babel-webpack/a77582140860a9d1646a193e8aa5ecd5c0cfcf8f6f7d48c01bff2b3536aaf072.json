{"ast":null,"code":"import { concatMap, tap } from 'rxjs/operators';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/service/book.service\";\nimport * as i2 from \"@angular/forms\";\nlet UploadBooksComponent = /*#__PURE__*/(() => {\n  class UploadBooksComponent {\n    constructor(bookService) {\n      this.bookService = bookService;\n      this.books = {\n        title: \"\",\n        description: \"\",\n        genres: \"\",\n        imageLink: \"\"\n      };\n    }\n    onImageSelected(event) {\n      console.log(event);\n      this.imageSelected = event.target.files[0];\n    }\n    onBookSelected(event) {\n      this.bookSelected = event.target.files[0];\n    }\n    onSubmit() {\n      alert(\"uploaded\");\n      //   this.bookService.uploadBook( this.books)\n      // .subscribe(\n      //   res => {\n      //     console.log(res);\n      //   },\n      //   error => {\n      //     console.error('Error uploading book:', error);\n      //     // Handle the error as needed, e.g., show an error message to the user\n      //   }\n      // );\n      // }\n      const bookData = this.books; // Replace with your logic to prepare book data\n      const imageFile = this.imageSelected; // Replace with your logic to get image file\n      const pdfFile = this.bookSelected; // Replace with your logic to get PDF file\n      this.bookService.uploadBook(bookData).pipe(concatMap(bookResponse => this.bookService.uploadBookImage(imageFile, bookResponse).pipe(tap(() => console.log('Image uploaded successfully')), concatMap(() => this.bookService.uploadBookPDF(pdfFile, bookResponse))))).subscribe(() => {\n        console.log('PDF uploaded successfully');\n        // Additional logic after all uploads\n      }, error => {\n        console.error('Error during upload:', error);\n        // Handle error\n      });\n    }\n\n    static {\n      this.ɵfac = function UploadBooksComponent_Factory(t) {\n        return new (t || UploadBooksComponent)(i0.ɵɵdirectiveInject(i1.BookService));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: UploadBooksComponent,\n        selectors: [[\"app-upload-books\"]],\n        decls: 27,\n        vars: 3,\n        consts: [[1, \"text-center\", \"font-bold\", \"text-2xl\", \"text-blue-700\"], [1, \"md:container\", \"md:mx-auto\", \"my-10\", \"md:px-96\"], [3, \"submit\"], [\"bookUploadForm\", \"ngForm\"], [1, \"relative\", \"z-0\", \"w-full\", \"mb-6\", \"group\"], [\"type\", \"text\", \"name\", \"title\", \"id\", \"title\", \"placeholder\", \" \", \"required\", \"\", 1, \"block\", \"py-2.5\", \"px-0\", \"w-full\", \"text-sm\", \"text-gray-900\", \"bg-transparent\", \"border-b-2\", \"border-t-0\", \"border-l-0\", \"border-r-0\", \"border-gray-300\", \"appearance-none\", \"dark:text-white\", \"dark:border-gray-600\", \"dark:focus:border-blue-500\", \"focus:outline-none\", \"focus:ring-0\", \"focus:border-blue-600\", \"peer\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"title\", 1, \"peer-focus:font-medium\", \"absolute\", \"text-sm\", \"text-gray-500\", \"dark:text-gray-400\", \"duration-300\", \"transform\", \"-translate-y-6\", \"scale-75\", \"top-3\", \"-z-10\", \"origin-[0]\", \"peer-focus:left-0\", \"peer-focus:text-blue-600\", \"peer-focus:dark:text-blue-500\", \"peer-placeholder-shown:scale-100\", \"peer-placeholder-shown:translate-y-0\", \"peer-focus:scale-75\", \"peer-focus:-translate-y-6\"], [\"name\", \"description\", \"id\", \"description\", \"rows\", \"1\", \"placeholder\", \" \", \"required\", \"\", 1, \"block\", \"py-2.5\", \"px-0\", \"w-full\", \"text-sm\", \"text-gray-900\", \"bg-transparent\", \"border-b-2\", \"border-t-0\", \"border-l-0\", \"border-r-0\", \"border-gray-300\", \"appearance-none\", \"dark:text-white\", \"dark:border-gray-600\", \"dark:focus:border-blue-500\", \"focus:outline-none\", \"focus:ring-0\", \"focus:border-blue-600\", \"peer\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"description\", 1, \"peer-focus:font-medium\", \"absolute\", \"text-sm\", \"text-gray-500\", \"dark:text-gray-400\", \"duration-300\", \"transform\", \"-translate-y-6\", \"scale-75\", \"top-3\", \"-z-10\", \"origin-[0]\", \"peer-focus:left-0\", \"peer-focus:text-blue-600\", \"peer-focus:dark:text-blue-500\", \"peer-placeholder-shown:scale-100\", \"peer-placeholder-shown:translate-y-0\", \"peer-focus:scale-75\", \"peer-focus:-translate-y-6\"], [\"type\", \"text\", \"name\", \"genre\", \"id\", \"genre\", \"placeholder\", \"\", \"required\", \"\", 1, \"block\", \"py-2.5\", \"px-0\", \"w-full\", \"text-sm\", \"text-gray-900\", \"bg-transparent\", \"border-b-2\", \"border-t-0\", \"border-l-0\", \"border-r-0\", \"border-gray-300\", \"appearance-none\", \"dark:text-white\", \"dark:border-gray-600\", \"dark:focus:border-blue-500\", \"focus:outline-none\", \"focus:ring-0\", \"focus:border-blue-600\", \"peer\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"genre\", 1, \"peer-focus:font-medium\", \"absolute\", \"text-sm\", \"text-gray-500\", \"dark:text-gray-400\", \"duration-300\", \"transform\", \"-translate-y-6\", \"scale-75\", \"top-3\", \"-z-10\", \"origin-[0]\", \"peer-focus:left-0\", \"peer-focus:text-blue-600\", \"peer-focus:dark:text-blue-500\", \"peer-placeholder-shown:scale-100\", \"peer-placeholder-shown:translate-y-0\", \"peer-focus:scale-75\", \"peer-focus:-translate-y-6\"], [1, \"relative\", \"z-0\", \"w-full\", \"mt-5\", \"mb-6\", \"group\"], [\"for\", \"file_input\", 1, \"block\", \"mb-2\", \"text-sm\", \"font-medium\", \"text-gray-900\", \"dark:text-white\"], [\"aria-describedby\", \"file_input_help\", \"id\", \"file_input\", \"type\", \"file\", 1, \"block\", \"w-full\", \"text-sm\", \"text-gray-900\", \"border\", \"border-gray-300\", \"rounded-lg\", \"cursor-pointer\", \"dark:text-gray-400\", \"focus:outline-none\", \"dark:bg-gray-700\", \"dark:border-gray-600\", \"dark:placeholder-gray-400\", 3, \"change\"], [\"type\", \"submit\", 1, \"text-white\", \"bg-blue-700\", \"hover:bg-blue-800\", \"focus:ring-4\", \"focus:outline-none\", \"focus:ring-blue-300\", \"font-medium\", \"rounded-lg\", \"text-sm\", \"w-full\", \"sm:w-auto\", \"px-5\", \"py-2.5\", \"text-center\", \"dark:bg-blue-600\", \"dark:hover:bg-blue-700\", \"dark:focus:ring-blue-800\"]],\n        template: function UploadBooksComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"h1\", 0);\n            i0.ɵɵtext(1, \"UPLOAD BOOK\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(2, \"div\", 1)(3, \"form\", 2, 3);\n            i0.ɵɵlistener(\"submit\", function UploadBooksComponent_Template_form_submit_3_listener() {\n              return ctx.onSubmit();\n            });\n            i0.ɵɵelementStart(5, \"div\", 4)(6, \"input\", 5);\n            i0.ɵɵlistener(\"ngModelChange\", function UploadBooksComponent_Template_input_ngModelChange_6_listener($event) {\n              return ctx.books.title = $event;\n            });\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(7, \"label\", 6);\n            i0.ɵɵtext(8, \"Book Title\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(9, \"div\", 4)(10, \"textarea\", 7);\n            i0.ɵɵlistener(\"ngModelChange\", function UploadBooksComponent_Template_textarea_ngModelChange_10_listener($event) {\n              return ctx.books.description = $event;\n            });\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(11, \"label\", 8);\n            i0.ɵɵtext(12, \"Book Description\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(13, \"div\", 4)(14, \"input\", 9);\n            i0.ɵɵlistener(\"ngModelChange\", function UploadBooksComponent_Template_input_ngModelChange_14_listener($event) {\n              return ctx.books.genres = $event;\n            });\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(15, \"label\", 10);\n            i0.ɵɵtext(16, \"Enter Genres (comma-separated)\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(17, \"div\", 11)(18, \"label\", 12);\n            i0.ɵɵtext(19, \"Upload Image file\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(20, \"input\", 13);\n            i0.ɵɵlistener(\"change\", function UploadBooksComponent_Template_input_change_20_listener($event) {\n              return ctx.onImageSelected($event);\n            });\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(21, \"div\", 4)(22, \"label\", 12);\n            i0.ɵɵtext(23, \"Upload PDF file\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(24, \"input\", 13);\n            i0.ɵɵlistener(\"change\", function UploadBooksComponent_Template_input_change_24_listener($event) {\n              return ctx.onBookSelected($event);\n            });\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(25, \"button\", 14);\n            i0.ɵɵtext(26, \"Submit\");\n            i0.ɵɵelementEnd()()();\n          }\n          if (rf & 2) {\n            i0.ɵɵadvance(6);\n            i0.ɵɵproperty(\"ngModel\", ctx.books.title);\n            i0.ɵɵadvance(4);\n            i0.ɵɵproperty(\"ngModel\", ctx.books.description);\n            i0.ɵɵadvance(4);\n            i0.ɵɵproperty(\"ngModel\", ctx.books.genres);\n          }\n        },\n        dependencies: [i2.ɵNgNoValidate, i2.DefaultValueAccessor, i2.NgControlStatus, i2.NgControlStatusGroup, i2.RequiredValidator, i2.NgModel, i2.NgForm]\n      });\n    }\n  }\n  return UploadBooksComponent;\n})();\nexport { UploadBooksComponent };","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}