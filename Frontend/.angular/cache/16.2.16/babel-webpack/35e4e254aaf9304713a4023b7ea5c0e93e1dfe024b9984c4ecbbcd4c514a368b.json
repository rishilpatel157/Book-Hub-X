{"ast":null,"code":"import { DialogElementsExampleDialogComponent } from '../dialog-elements-example-dialog/dialog-elements-example-dialog.component';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"../service/book.service\";\nimport * as i3 from \"../service/user.service\";\nimport * as i4 from \"@angular/material/dialog\";\nimport * as i5 from \"@angular/material/expansion\";\nlet ViewReaderBookComponent = /*#__PURE__*/(() => {\n  class ViewReaderBookComponent {\n    constructor(router, bookService, userService, dialog) {\n      this.router = router;\n      this.bookService = bookService;\n      this.userService = userService;\n      this.dialog = dialog;\n      this.panelOpenState = false;\n    }\n    ngOnInit() {\n      this.router.params.subscribe(param => {\n        const id = Number(param['id']);\n        console.log(id);\n        this.bookService.getBookById(id).subscribe(res => {\n          console.log(res);\n          this.book = res;\n        });\n      });\n    }\n    download(id, bookName) {\n      if (this.userService.isLoggedIn()) {\n        this.bookService.downloadPdf(id).subscribe(data => this.downloadFile(data, bookName), error => console.error('Error downloading PDF:', error));\n      } else {\n        this.dialog.open(DialogElementsExampleDialogComponent);\n      }\n    }\n    downloadFile(data, fileName) {\n      const blob = new Blob([data], {\n        type: 'application/pdf'\n      });\n      // Create a temporary anchor element\n      const link = document.createElement('a');\n      link.href = window.URL.createObjectURL(blob);\n      link.download = fileName;\n      // Append the anchor to the body and trigger a click event\n      document.body.appendChild(link);\n      link.click();\n      // Remove the anchor from the body\n      document.body.removeChild(link);\n    }\n    static {\n      this.ɵfac = function ViewReaderBookComponent_Factory(t) {\n        return new (t || ViewReaderBookComponent)(i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i2.BookService), i0.ɵɵdirectiveInject(i3.UserService), i0.ɵɵdirectiveInject(i4.MatDialog));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: ViewReaderBookComponent,\n        selectors: [[\"app-view-reader-book\"]],\n        decls: 22,\n        vars: 4,\n        consts: [[1, \"container\", \"mx-auto\", \"flex\", \"justify-center\", \"mt-5\"], [1, \"w-full\", \"md:w-2/4\", \"rounded-lg\", \"dark:bg-gray-800\", \"dark:border-gray-700\"], [1, \"flex\", \"flex-col\", \"md:flex-row\", \"items-center\", \"gap-5\"], [1, \"w-full\", \"md:w-1/3\"], [\"alt\", \"product image\", 1, \"rounded\", \"w-full\", 3, \"src\"], [1, \"flex\", \"flex-col\", \"items-start\", \"justify-center\", \"gap-2\", \"w-full\", \"md:w-2/3\", \"p-5\"], [1, \"text-xl\", \"font-semibold\", \"tracking-tight\", \"text-gray-900\", \"dark:text-white\", \"mb-2\"], [1, \"mb-2\"], [1, \"text-white\", \"cursor-pointer\", \"bg-green-600\", \"hover:bg-green-800\", \"focus:ring-4\", \"focus:outline-none\", \"focus:ring-blue-300\", \"font-medium\", \"rounded-lg\", \"text-sm\", \"px-5\", \"py-2.5\", \"text-center\", \"dark:bg-blue-600\", \"dark:hover:bg-blue-700\", \"dark:focus:ring-blue-800\", 3, \"click\"], [1, \"px-5\", \"pb-5\", \"mt-5\"], [\"hideToggle\", \"\"], [1, \"text-center\"]],\n        template: function ViewReaderBookComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"div\", 3);\n            i0.ɵɵelement(4, \"img\", 4);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(5, \"div\", 5)(6, \"div\", 6);\n            i0.ɵɵtext(7);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(8, \"div\", 7);\n            i0.ɵɵtext(9);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(10, \"a\", 8);\n            i0.ɵɵlistener(\"click\", function ViewReaderBookComponent_Template_a_click_10_listener() {\n              return ctx.download(ctx.book.bookPDF.id, ctx.book.bookPDF.name);\n            });\n            i0.ɵɵtext(11, \"Download\");\n            i0.ɵɵelementEnd()()();\n            i0.ɵɵelementStart(12, \"div\", 9)(13, \"mat-accordion\")(14, \"mat-expansion-panel\", 10)(15, \"mat-expansion-panel-header\")(16, \"mat-panel-title\")(17, \"div\", 11);\n            i0.ɵɵtext(18, \" Description\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelement(19, \"mat-panel-description\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(20, \"div\");\n            i0.ɵɵtext(21);\n            i0.ɵɵelementEnd()()()()()();\n          }\n          if (rf & 2) {\n            i0.ɵɵadvance(4);\n            i0.ɵɵproperty(\"src\", \"data:image/png;base64,\" + ctx.book.bookImage.image, i0.ɵɵsanitizeUrl);\n            i0.ɵɵadvance(3);\n            i0.ɵɵtextInterpolate1(\" \", ctx.book.title, \" \");\n            i0.ɵɵadvance(2);\n            i0.ɵɵtextInterpolate1(\" \", ctx.book.author.firstName + \" \" + ctx.book.author.lastName, \" \");\n            i0.ɵɵadvance(12);\n            i0.ɵɵtextInterpolate(ctx.book.description);\n          }\n        },\n        dependencies: [i5.MatAccordion, i5.MatExpansionPanel, i5.MatExpansionPanelHeader, i5.MatExpansionPanelTitle, i5.MatExpansionPanelDescription]\n      });\n    }\n  }\n  return ViewReaderBookComponent;\n})();\nexport { ViewReaderBookComponent };","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}